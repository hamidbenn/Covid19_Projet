<!DOCTYPE html>
<html lang="en">

    <head>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="description" content="">
        <meta name="author" content="">

        <title>COVID-19</title>
         <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

  <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">
  <!-- Nucleo Icons -->
  <link href="./assets/css/nucleo-icons.css" rel="stylesheet" />
  <!-- CSS Files -->
  <!-- CSS Just for demo purpose, don't include it in your project -->
  <link href="./assets/demo/demo.css" rel="stylesheet" />
  <link href="sb-admin-2.min.css" rel="stylesheet" type="text/css"/>
  <link href="sb-admin-2.css" rel="stylesheet" type="text/css"/>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="s.css" type="text/css" rel="stylesheet" />
   <script src="js/sb-admin-2.min.js"></script>
  <script src="vendor/chart.js/Chart.min.js"></script>
  <script src="js/demo/chart-area-demo.js"></script>
  <script src="js/demo/3-donnees-api.js"></script>
  <script src="js/demo/chart-pie-demo.js"></script>
 <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
 


  <!-- Core plugin JavaScript-->
  <script src="vendor/jquery-easing/jquery.easing.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>
  <script src="https://materializecss.com/templates/starter-template/js/init.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  
        <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>   

<link href="vendor/bootstrap-4.1/bootstrap.min.css" rel="stylesheet" media="all">

<link href="css/theme.css" rel="stylesheet" media="all">


  <!--Custom Font-->
  <link href="https://fonts.googleapis.com/css?family=Montserrat:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">
  
        <!-- Custom fonts for this template -->
        <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">
        <!-- Custom styles for this template -->
        <link href="css/sb-admin-2.min.css" rel="stylesheet">
        <link href="css/style.css" rel="stylesheet" type="text/css"/>
        <!-- Custom styles for this page -->
        <link href="vendor/datatables/dataTables.bootstrap4.min.css" rel="stylesheet">

    </head>
     <div class="header">
     <h1 style=" color:#1132b8; text-align:center" >COVID-19 Coronavirus Pandemic</h1>
        <br>
        <div style=" font-size:16px; margin-top:20px; margin-bottom:20px">
        </div>
   </head>
    <body id="page-top">
<center>
    
    <div class="row">
                            
                            <div class="col-lg-4">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="d-flex flex-row">
                                            <div class="col-3 align-self-center">
                                                <div class="round bg-success">
                                                    <span style="color:white"><i class="fas fa-syringe" aria-hidden="false"></i></span>
                                                </div>
                                            </div>
                                            <div class="col-9 align-self-center text-right">
                                                <div class="m-l-10">
                                                    <h5 class="mt-0" id="recovered">510666</h5>
                                                    <p class="mb-0 text-muted">Recovered people</p>
                                                </div>
                                            </div>                                                                                          
                                        </div>
                                        
                                    </div><!--end card-body-->
                                </div><!--end card-->
                            </div><!--end col-->

                            <div class="col-lg-4">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="d-flex flex-row">
                                            <div class="col-3 align-self-center">
                                                <div class="round bg-warning">
                                                    <span style="color:white"><i class="fas fa-viruses" aria-hidden="true"></i></span>
                                                </div>
                                            </div>
                                            <div class="col-9 text-right align-self-center">
                                                <div class="m-l-10 ">
                                                    <h5 class="mt-0" id="confirmed">2083607</h5>
                                                    <p class="mb-0 text-muted">Confirmed Cases</p>
                                                </div>
                                            </div>                                                                                                                
                                        </div>
                                       
                                    </div><!--end card-body-->
                                </div><!--end card-->
                            </div><!--end col-->

                            <div class="col-lg-4">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="search-type-arrow"></div>
                                        <div class="d-flex flex-row">
                                            <div class="col-3 align-self-center">
                                                <div class="round " style="background-color: #DC143C;">
                                                   <span style="color:white"> <i class="fas fa-skull-crossbones" aria-hidden="true"></i></span>
                                                </div>
                                            </div>
                                            <div class="col-9 align-self-center text-right">
                                                <div class="m-l-10 ">
                                                    <h5 class="mt-0" id="death">134632</h5>
                                                    <p class="mb-0 text-muted">Death Cases</p>
                                                </div>
                                            </div>                                                                
                                        </div>
                                                                            </div><!--end card-body-->
                                </div><!--end card-->
                            </div><!--end col-->
                        </div>
    
    <br>
          <div class="row">

            <!-- Area Chart -->
            <div class="col-xl-8 col-lg-7">
              <div class="card shadow mb-4">
                <!-- Card Header - Dropdown -->
                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                  <h6 class="m-0 font-weight-bold text-primary">Total Coronavirus's Statistiques </h6>
                  <div class="dropdown no-arrow">
                    <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                    </a>
                    
                  </div>
                </div>
                <!-- Card Body -->
                <div class="card-body">
                  <div class="chart-area">
                    <canvas id="chartdiv"></canvas>
                  </div>
                </div>
              </div>
            </div>

            <!-- Pie Chart -->
            <div class="col-xl-4 col-lg-5">
              <div class="card shadow mb-4">
                <!-- Card Header - Dropdown -->
                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                  <h6 class="m-0 font-weight-bold text-primary">Statistiques All Over World</h6>
                  <div class="dropdown no-arrow">
                    <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                    </a>
                    
                  </div>
                </div>
                <!-- Card Body -->
                <div class="card-body">
                  <div class="chart-pie pt-4 pb-2">
                    <canvas id="myPieChart"></canvas>
                  </div>
                  <div class="mt-4 text-center small">
                    <span class="mr-2">
                      <i class="fas fa-circle text-danger"></i>Deaths
                    </span>
                    <span class="mr-2">
                      <i class="fas fa-circle text-success"></i> Confirmed
                    </span>
                    <span class="mr-2">
                      <i class="fas fa-circle text-info"></i> Recovered
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <br><br>
    
  <div class="wrapper">
    <div class="main-panel">
      <!-- Navbar -->
      <div class="modal modal-search fade" id="searchModal" tabindex="-1" role="dialog" aria-labelledby="searchModal" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <input type="text" class="form-control" id="inlineFormInputGroup" placeholder="SEARCH">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <i class="tim-icons icon-simple-remove"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
              <div class="sidebar" hidden>
                <!--
                  Tip 1: You can change the color of the sidebar using: data-color="blue | green | orange | red"
              -->
                <div class="sidebar-wrapper" hidden>
                </div>
              </div>
              <div class="main-panel">
                  
                  <div class="row">
          <div class="col-lg-4">
            <div class="card card-chart">
              <div class="card-header" >
                <h3 style="margin-left:5px" class="card-title">Statistiques</h3>
<canvas id="myChart" width="400" height="400"></canvas>
        					</div>
        </div>
      </div>
                      
             <div class="col-xl-8 col-lg-7">
              <div class="card shadow mb-4">
                <!-- Card Header - Dropdown -->
                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                  <h6 class="m-0 font-weight-bold text-primary">Total Coronavirus Cases By Continents</h6>
                  <div class="dropdown no-arrow">
                    <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                    </a>
                    
                  </div>
                </div>
                <!-- Card Body -->
                <div class="card-body">
                  <div class="chart-area">
                    <canvas id="myBarChart"></canvas>
                  </div>
                </div>
              </div>
            </div>
                   
          
        </div>
                
                <select  class="selectpicker countrypicker"  name="country" data-live-search="true"  data-flag="true"></select>
                </div >
                <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
                <script src="https://netdna.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/js/bootstrap-select.min.js"></script>
                <script src="js/countrypicker.js"></script>
                <br>
                <div class="btn btn-default" >
                  <h5>Date Début</h5>
                  <input id="date_debut" type="date" placeholder="From" class="datepicker">
                </div>
                <div class="btn btn-default">
                  <h5 style="text-align:left ">Date Fin</h5>
                  <input id="date_fin" type="date" placeholder="To"  class="datepicker">
                </div>
                <br><br>
                <button id="recherche-button" class="btn btn-primary btn-block">Recherche</button>
              </div>
                <!-- Navbar -->
                <script >
                <!-- End Navbar -->  var value;
                  var b;
                  $(document).ready(function() {
                    //afficher les donnees dans le tableau
                  var s = document.getElementsByName('country')[0];
                  s.addEventListener("change", changeOrg);

                  function changeOrg(){
                    var Table = document.getElementById("mytable");
                    Table.innerHTML = "";
                    if (s.options[s.selectedIndex]!=null)
                    {
                      var val = s.options[s.selectedIndex].value;
                      console.log(val);

                  //on page load
                  var _gaq = _gaq || [];
                  _gaq.push(['_setAccount', 'UA-36251023-1']);
                  _gaq.push(['_setDomainName', 'jqueryscript.net']);
                  _gaq.push(['_trackPageview']);

                  (function() {
                    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                  })();
                  /*Dummy Data, Curtosy of: https://www.generatedata.com/*/
                  $.getJSON( "https://pomber.github.io/covid19/timeseries.json", function( Afghanistan ) {
                    var Table = document.getElementById("mytable");
              Table.innerHTML = "";
                    $.each( Afghanistan, function(key, value) {

                    if (key==val){
                      for (var i = 0; i < value.length; i++) {
                        var tr = $('<	<tr class="row100 body"/>');
                        tr.append('<td class= "cell100 column1" >' + key + "</td>");
                        tr.append('<td class= "cell100 column2" >'+ value[i].date + "</td>");
                        tr.append('<td class= "cell100 column3" >' + value[i].confirmed + "</td>");
                        tr.append('<td class= "cell100 column4" >' + value[i].deaths + "</td>");
                        tr.append('<td class= "cell100 column5" >' + value[i].recovered + "</td>");
                        $('.table1').append(tr);
                        };
                    $("#recherche-button").click(function(e) {

                      //formuler le type de data
                      var getFormData = {
                        dates: {
                          start: $("#date_debut").val(),
                          end: $("#date_fin").val()
                        }
                      };

                      //faire lappel a la fonction recherche 
                      var recherchedData = dateRecherche(value, getFormData.dates.start, getFormData.dates.end);
                      var data = recherchedData.finalValues
                      var Table = document.getElementById("mytable");
              Table.innerHTML = "";
                      for (var i = 0; i < data.length; i++) {
                        var tr = $('<	<tr class="row100 body"/>');
                        tr.append('<td class= "cell100 column1" >' + key + "</td>");
                        tr.append('<td class= "cell100 column2" >'+ data[i].date + "</td>");
                        tr.append('<td class= "cell100 column3" >' + data[i].confirmed + "</td>");
                        tr.append('<td class= "cell100 column4" >' + data[i].deaths + "</td>");
                        tr.append('<td class= "cell100 column5" >' + data[i].recovered + "</td>");
                          $('.table1').append(tr);


                    };
                    })

              };
              });

              });
              };
              };
              changeOrg();


                  //recherche par date function 
                  function dateRecherche(currentValue, startDate, endDate) {
                    function rechercheFunction_dates(enteredValue) {
                      //faire un test pour savoir estce que la date entrer est valide
                      var date_entrer = {
                        datemin: new Date(enteredValue.date) >= new Date(startDate),
                        datemax: new Date(enteredValue.date) <= new Date(endDate)
                      };

                      var test; 

                      if (startDate != "" && endDate != "") {

                        test = (date_entrer.datemin && date_entrer.datemax);

                      }else {

                        test ; //si on a pas enttrer le mindate est le maxdate 
                                         //tous les donnees vont etre affiches
                      }
                      return (test);

                    }

                    //Return afficher les donnees
                    return ({
                      originalValues: currentValue,
                      finalValues: currentValue.filter(rechercheFunction_dates)
                      //filter() does not change the original array.

                    });

                  }
                });
                </script >

                <div class="content">

                  <div class="row">
                    <div class="col-md-12">
                      <div class="card ">
                        <div class="card-header">
                        </div>
                        <div class="card-body">
                          <div class="table-responsive">
                            <table class="table tablesorter " id="">
                              <thead class=" text-primary">
                                <tr>
                                  <th>
                                    Country
                                  </th>
                                  <th>
                                    Date
                                  </th>
                                  <th>
                                    Confirmed
                                  </th>
                                  <th >
                                    Deaths
                                  </th>
                                  <th >
                                    Recovred
                                  </th>
                                </tr>
                              </thead>
                              <tbody id= "mytable" class='table1'>

                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>
                    </div>
      </div>
    </div>
  </div>
  </center>
        <!-- End of Main Content -->

        <!-- Footer -->
        <footer class="sticky-footer bg-white">
            <div class="container my-auto">
                <div class="copyright text-center my-auto">
                    <span>Copyright &copy; Bensitel Abdelhamid 2020</span>
                </div>
            </div>
        </footer>
        <!-- End of Footer -->

    </div>
    <!-- End of Content Wrapper -->

</div>
<!-- End of Page Wrapper -->

                    
                          
<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

<!-- Core plugin JavaScript-->
<script src="js/chart-pie-demo.js" type="text/javascript"></script>
<script src="js/chart-area-demo.js" type="text/javascript"></script>
<script src="js/3-donnees-api.js" type="text/javascript"></script>
<script src="js/chart-bar-demo.js" type="text/javascript"></script>
<script src="js/chart-bar-demo.js" type="text/javascript"></script>
<script src="vendor/jquery-easing/jquery.easing.min.js"></script>
<script src="js/chart-area-demo.js" type="text/javascript"></script>
<!-- Custom scripts for all pages-->
<script src="js/sb-admin-2.min.js"></script>
<script type="text/javascript" src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
<script src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
<!-- Page level plugins -->
<script src="vendor/datatables/jquery.dataTables.min.js"></script>
<script src="vendor/datatables/dataTables.bootstrap4.min.js"></script>
<script src="js/chart-pie-demo.js" type="text/javascript"></script>
<script src="./assets/js/core/jquery.min.js"></script>
  <script src="./assets/js/core/popper.min.js"></script>
  <script src="./assets/js/core/bootstrap.min.js"></script>
  <script src="./assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/3.1.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.1.0/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.1.0/firebase.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.13.2/firebase-analytics.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.1.0/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/6.2.3/firebase-storage.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.1.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.1.0/firebase-database.js"></script>
<script src="https://www.amcharts.com/lib/4/core.js"></script>
<script src="https://www.amcharts.com/lib/4/charts.js"></script>
<script src="https://www.amcharts.com/lib/4/maps.js"></script>
<script src="https://www.amcharts.com/lib/4/geodata/worldLow.js"></script>
<script src="https://covid.amCharts.com/data/js/world_timeline.js"></script>
<script src="https://covid.amCharts.com/data/js/total_timeline.js"></script>
<script src="https://www.amcharts.com/lib/4/themes/animated.js"></script>

<!-- Page level custom scripts -->
<script src="js/demo/datatables-demo.js"></script>
<script src="./assets/js/core/popper.min.js"></script>
  <script src="./assets/js/core/bootstrap.min.js"></script>
  <script src="./assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>
  <!--  Google Maps Plugin    -->
  <!-- Place this tag in your head or just before your close body tag. -->
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script>
  <!-- Chart JS -->
  <script src="./assets/js/plugins/chartjs.min.js"></script>
  <!--  Notifications Plugin    -->
  <script src="./assets/js/plugins/bootstrap-notify.js"></script>
  <!-- Control Center for Black Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="./assets/js/black-dashboard.min.js?v=1.0.0"></script><!-- Black Dashboard DEMO methods, don't include it in your project! -->
  <script src="./assets/demo/demo.js"></script>
 <script>
    $(document).ready(function() {
         // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyDbzTbk60LVx6Uvx3tZf5un_GG__bpBMRQ",
    authDomain: "myproject-947f0.firebaseapp.com",
    databaseURL: "https://myproject-947f0.firebaseio.com",
    projectId: "myproject-947f0",
    storageBucket: "myproject-947f0.appspot.com",
    messagingSenderId: "511235025848",
    appId: "1:511235025848:web:6feda3a3e3067e480cbd4d",
    measurementId: "G-FYEEH5EWJH"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
      //creer une reference pour notre firebase database
      var ref=firebase.database().ref();
      //recuperer les donnees sous format json en utilis AJAX request
    $.getJSON( "https://pomber.github.io/covid19/timeseries.json", function( dat ) {
      $.each( dat, function(key, data) {
        //variable contient les clés recuperer par lapi
          var usersRef1 = ref.child(key);

        //variable contient les donnees de chaque clé 
        var usersRef = usersRef1.child(data[data.length-1].date);

        //writing in firebase,
        usersRef.set({
          cases:data[data.length-1].confirmed,
          deaths:data[data.length-1].deaths,
          recovered:data[data.length-1].recovered,})

      const collection = data.map(x => ({ ...x, date: x.date.split("-"), confirmed: Number(x.confirmed)}));

        const mapDayToMonth = collection.map(x => ({...x, date: new Date(x.date).getMonth()}));


        var sumPerMonth = mapDayToMonth.reduce((acc, cur) => {
          acc[cur.date] = acc[cur.date] + cur.Confirmed || cur.confirmed; // increment or initialize to cur.value
          return acc;
        }, {})
          var t=[]
         var a=0;
         var b=0;
         var c=0;
         var d=0;
        var tab=[];
        $.each( sumPerMonth, function(key, value) {  tab.push(value);});console.log(tab)
        a=a+tab[0]
        b=b+tab[1];
        c=c+tab[2]
        d=d+tab[3]
        });
      //afficher les donnees dans le graphe
      var s = document.getElementsByName('country')[0];
      s.addEventListener("change", changeOrg);
var datatotal=[]
      function changeOrg(){
        if (s.options[s.selectedIndex]!=null)
        {
          var val = s.options[s.selectedIndex].value;

      //on page load
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-36251023-1']);
      _gaq.push(['_setDomainName', 'jqueryscript.net']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
      $.each( dat, function(key, data) {
        if(key==val){
          //tableau qui contient datatotal pour les mettre dans le graphe
          datatotal=[]
           // creer un nouveau array avec le result de la fonction appellée pour chaque array element 
          //pour nous faire la somme des 3 result
      const collection = data.map(x => ({ ...x, date: x.date.split("-"), confirmed: Number(x.confirmed)}));

        const mapDayToMonth = collection.map(x => ({...x, date: new Date(x.date).getMonth()}));


        var sumPerMonth = mapDayToMonth.reduce((acc, cur) => {
          acc[cur.date] = acc[cur.date] + cur.Confirmed || cur.confirmed; // increment or initialize to cur.value
          return acc;
        }, {})
        var tab=[];$.each( sumPerMonth, function(key, value) {  tab.push(value);});console.log(tab[3])

        datatotal.push(tab[3])
         var collection1 = data.map(x => ({ ...x, date: x.date.split("-"), recovered: Number(x.recovered)}));

          var  mapDayToMonth1 = collection.map(x => ({...x, date: new Date(x.date).getMonth()}));


           var sumPerMonth1 = mapDayToMonth.reduce((acc, cur) => {
            acc[cur.date] = acc[cur.date] +cur.recovered|| cur.recovered; // increment or initialize to cur.value
            return acc;
          }, {})
          var tab1=[];$.each( sumPerMonth1, function(key, value) {  tab1.push(value);});
          datatotal.push(tab1[3])
          var collection2 = data.map(x => ({ ...x, date: x.date.split("-"), deaths: Number(x.deaths)}));

           var  mapDayToMonth2 = collection.map(x => ({...x, date: new Date(x.date).getMonth()}));


            var sumPerMonth2 = mapDayToMonth.reduce((acc, cur) => {
             acc[cur.date] = acc[cur.date] +cur.deaths || cur.deaths; // increment or initialize to cur.value
             return acc;
           }, {})
           var tab2=[];$.each( sumPerMonth2, function(key, value) {  tab2.push(value);});console.log(tab2[3])
           datatotal.push(tab2[3])
           console.log(datatotal)


}
});
}


var dynamicColors = function() {
                    var r = Math.floor(Math.random() * 255);
                    var g = Math.floor(Math.random() * 255);
                    var b = Math.floor(Math.random() * 255);
                    return "rgb(" + r + "," + g + "," + b + ")";
                 };  

      var ctx = document.getElementById("myChart");
      if(myChart && myChart !== null){
        myChart.destroy();
    }
      var myChart = new Chart(ctx, {
        type: 'pie',
        data: {
          labels: ['Recovered', 'Confirmed', 'Death'],
          datasets: [{
            label: '# confirmed',
            data: datatotal,
            backgroundColor: [
              dynamicColors(),
              dynamicColors(),
              dynamicColors()
            ],
            borderColor: 
              dynamicColors(),
              
            borderWidth: 1
          }]
        },
        options: {
         	//cutoutPercentage: 40,
          responsive: true,
        }
        });
        };

        changeOrg()
         if(myChart && myChart !== null){
          datatotal=[];
        myChart.destroy();
    }

        });
});
     
  </script>
    <script>
    $(document).ready(function() {
      // Javascript method's body can be found in assets/js/demos.js
      demo.initDashboardPageCharts();

    });
  </script>


  <script src="https://cdn.trackjs.com/agent/v3/latest/t.js"></script>
  
</body>


</html>
